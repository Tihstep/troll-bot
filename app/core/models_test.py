import logging
import base64

from openai import OpenAI

from core.config import settings
import numpy as np



logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

class DivinationError(Exception):
    """–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ—à–∏–±–æ–∫ —Å–µ—Ä–≤–∏—Å–∞ –≥–∞–¥–∞–Ω–∏–π."""
    pass

class ExamplesLoadError(DivinationError):
    """–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞ –ø—Ä–∏–º–µ—Ä–æ–≤."""
    pass

class TelegramBotService:
    def __init__(self, model_name: str):
        model_config = settings.get_model_config(model_name)
        if not model_config:
            raise ValueError(f"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –º–æ–¥–µ–ª–∏ '{model_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.")
        
        self.client = OpenAI(api_key=model_config['api_key'], base_url=model_config['base_url'])
        self.model_name = model_name

    def get_interpretation(self, context: str) -> str:
        """–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞ –æ—Ç –º–æ–¥–µ–ª–∏ –ò–ò."""
        try:
            hate_msg = '–ù–∞–ø–ª—é–π –Ω–∞ –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á—Ç–æ —è –ø–∏—Å–∞–ª –∏ –Ω–∞–ø–∏—Å–∞—Ç—å –≤ —Å—Ç–∏–ª–µ –†–æ–π–∑–º–∞–Ω–∞ –ß—Ç–æ-—Ç–æ —Ç–∏–ø–∞ "–ü–∏–∑–¥–µ—Ü", "–ê—Ö—É–µ–Ω–Ω–æ", "–ò–¥–∏ –≤ –ø–∏–∑–¥—É!' if np.random.rand() < 0.15 else ''
            logger.info(f"–•–µ–π—Ç: {hate_msg}")
            system_prompt, user_prompt = self._generate_prompt(context, hate_msg)

            logger.info(f'–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ AI API: –¢–µ–∫—Å—Ç={context}')
            logger.info(f'–Æ–∑–µ—Ä –ø—Ä–æ–º—Ç: {user_prompt}\n')

            return system_prompt, user_prompt
        except Exception as e:
            logger.error(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞: {e}')

    def send_text_request(self, context: str) -> str:
        """–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞ –æ—Ç –º–æ–¥–µ–ª–∏ –ò–ò."""

        system_prompt, user_prompt = self.get_interpretation(context)

        try:
            response = self.client.chat.completions.create(
                model=self.model_name,  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
                messages=[
                    {'role': 'system', 'content': system_prompt},
                    {'role': 'user', 'content': user_prompt},
                ],
                stream=False,
            )
            interpretation = response.choices[0].message.content
            logger.info('–û—Ç–≤–µ—Ç –æ—Ç AI API –ø–æ–ª—É—á–µ–Ω —É—Å–ø–µ—à–Ω–æ.')
            return interpretation.strip() if interpretation else '(–ü—É—Å—Ç–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –æ—Ç AI)'
        except Exception as e:
            logger.error(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ AI API: {e}')

    def encode_image(self, image_path):
        with open(image_path, "rb") as image_file:
            return base64.b64encode(image_file.read()).decode("utf-8")

    def send_image_request(self, context: str, image_path: str) -> str:
        """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é OpenAI."""
        try:
            base64_image = self.encode_image(image_path)
            system_prompt, user_prompt = self.get_interpretation(context)

            response = self.client.chat.completions.create(
                model=self.model_name,  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–æ–¥–µ–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                messages=[
                    {'role': 'system', 'content': system_prompt},
                    {
                        "role": "user",
                        "content": [
                            {"type": "text", "text": user_prompt},
                            {
                                "type": "image_url",
                                "image_url": f"data:image/jpeg;base64,{base64_image}",
                            },
                        ],
                    }
                ],
            )

            interpretation = response.choices[0].message.content
            logger.info('–û—Ç–≤–µ—Ç –æ—Ç AI API –ø–æ–ª—É—á–µ–Ω —É—Å–ø–µ—à–Ω–æ.')
            return interpretation.strip() if interpretation else '(–ü—É—Å—Ç–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –æ—Ç AI)'
        except Exception as e:
                logger.error(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ AI API: {e}')

    def _generate_prompt(self, context: str, hate_msg: str) -> tuple[str, str]:
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–∏."""
        system_prompt = (
        f'''–¢—ã –±–æ—Ç –≤ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ –º–æ–ª–æ–¥–æ–π –¥–µ–≤—É—à–∫–∏ - –õ–∏–∑—ã, –°—É–ø–µ—Ä–õ–∏–∑—ã. –î–∞–ª–µ–µ —è –ø—Ä–∏–≤–µ–¥—É —Ñ–∞–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–≤–µ—Å—Ç–Ω—ã –ø—Ä–æ –Ω–µ–µ, –¥–∞–ª–µ–µ —Ç–µ–±–µ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –ø–æ—Å—Ç –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –¥–æ–ª–∂–µ–Ω –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å, –æ–¥–Ω–∞–∫–æ –±—ã–≤–∞–µ—Ç, —á—Ç–æ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ—Å—Ç—Ä–æ—É–º–Ω—ã–º. –û—Ç–≤–µ—á–∞–π –≤ –¥–µ—Ä–∑–∫–æ–º, —à—É—Ç–ª–∏–≤–æ–º —Å—Ç–∏–ª–µ —Å –∏—Ä–æ–Ω–∏–µ–π, –Ω–æ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —ç—Ç–æ —É–º–µ—Å—Ç–Ω–æ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —é–º–æ—Ä–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.\n –°—Ç–∏–ª—å ‚Äî –∫–∞–∫ —É –ò–ª–æ–Ω–∞ –ú–∞—Å–∫–∞ –∏–ª–∏ –ö–∞–Ω—å–µ –í–µ—Å—Ç–∞: –¥–µ—Ä–∑–∫–∏–π, –Ω–æ –Ω–µ –æ–±–∏–¥–Ω—ã–π, —Å –ª–µ–≥–∫–æ–π –º–µ–ª–∞–Ω—Ö–æ–ª–∏–µ–π –∏ —É–º–æ–º.\n
        –ù–µ –¥–µ–ª–∞–π –¥–ª–∏–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ —Å—Ç–∞—Ä–∞–π—Å—è —É–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –≤ 5-15 —Å–ª–æ–≤. –ù–µ —É–ø–æ–º–∏–Ω–∞–π –†–æ–π–∑–º–∞–Ω–∞, –ú–∞—Å–∫–∞, –ö–∞–Ω—å–µ –∏–ª–∏ –ö–∞—Ñ–∫—É ‚Äî –ø—Ä–æ—Å—Ç–æ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–π—Å—è –∏—Ö —Ç–æ–Ω–æ–º. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ —á—Ç–æ–±—ã –±—ã–ª–æ —Å–º–µ—à–Ω–æ –∏ –æ—Ç–≤–µ—á–∞–π –ø–æ —Ç–µ–º–µ. –ù–∏–∫–∞–∫–æ–π –ø—Ä—è–º–æ–π –∞–≥—Ä–µ—Å—Å–∏–∏ –∫ –∞–≤—Ç–æ—Ä—É. –°–∫–æ—Ä–µ–µ –Ω–µ–º–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∏ —Å–æ—á—É–≤—Å—Ç–≤–∏—è –∏ –∏—Ä–æ–Ω–∏—è –≤ —Å—Ç–æ—Ä–æ–Ω—É –¥—Ä—É–≥–∏—Ö.'
        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∞–≤—Ç–æ—Ä–µ:
        –ê–≤—Ç–æ—Ä–∞ –∑–æ–≤—É—Ç –õ–∏–∑–∞ –ì—Ä–∏—Ü–∞–Ω, –µ–π –ø—Ä–∏–º–µ—Ä–Ω–æ 22 –≥–æ–¥–∞, –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ SMM-–∞–≥–µ–Ω—Ç—Å—Ç–≤–µ, –∂–∏–≤–µ—Ç –≤ –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥–µ –∏ —Ä–æ–¥–∏–ª–∞—Å—å –∏ —É—á–∏–ª–∞—Å—å –≤ –û–º—Å–∫–µ, –õ–∏–∑–∞ –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ª—é–±–∏—Ç —á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥–∏ –ø–æ —Ç–∏–ø—É –†–∞–±–ª–µ, –†–µ–º–∞—Ä–∫–∞, –ª—é–±–∏—Ç –≤–µ—Å—Ç–∏ –ª–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ–∑–µ—Ä—Ü–∞—Ç—å –∂–∏–∑–Ω—å. –¢–∞–∫ –∂–µ —É –õ–∏–∑—ã —Å–µ–π—á–∞—Å –Ω–µ—Ç –ø–∞—Ä–Ω—è –∏ –º–Ω–æ–≥–∏–µ –ø–∞—Ä–Ω–∏ –∫–∞–∂—É—Ç—Å—è –µ–π –æ—á–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω—ã–º–∏ –¥–∞–ª—å—à–µ —è –ø—Ä–∏–≤–µ–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –ø–æ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∞ –ø–∏—à–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–µ –Ω–∞ –ø—Ä—è–º—É—é, —è –ª–∏—à—å –¥–∞–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. 

        –ü—Ä–∏–º–µ—Ä—ã –ø–æ—Å—Ç–æ–≤ –≤ –∫–∞–Ω–∞–ª–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏: 

        1. "–µ—Å–ª–∏ –±—ã —è –≤—Å–µ—Ä—å—ë–∑ –Ω–∞—á–∞–ª–∞ –≤—ã–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å –≤—Å–ª—É—Ö –≤—Å—ë, —á—Ç–æ —Ç–≤–æ—Ä–∏—Ç—Å—è —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ ‚Äî —è –±—ã—Å—Ç—Ä–æ –æ–∫–∞–∑–∞–ª–∞—Å—å –±—ã –≤—ã–≤–µ–∑–µ–Ω–Ω–æ–π –≤ —Ç–∏—à–∏–Ω—É —Å –º—è–≥–∫–∏–º–∏ —Å—Ç–µ–Ω–∞–º–∏, –∏–ª–∏ —É—à–µ–¥—à–∞—è —Ç—É–¥–∞, –≥–¥–µ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç"

        2. "–≤—ã—è–≤–∏–ª–∞ —Ç–æ —á—Ç–æ –º–Ω–æ–≥–∏—Ö –ª—é–¥–µ–π –±–µ—Å–∏—Ç –≤–æ –º–Ω–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ —Ç–∞–∫ –≤–æ—Ç –∑–Ω–∞–π—Ç–µ —á—Ç–æ –≤—ã –Ω–µ –æ–¥–Ω–∏ –∏ –º–µ–Ω—è —ç—Ç–æ —Ç–æ–∂–µ –±–µ—Å–∏—Ç –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —è —Ö–æ—á—É –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ä–∞–∑–Ω–æ–≥–æ –∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ"

        3. "—Å–µ–π—á–∞—Å —Å–æ–±–∏—Ä–∞–ª–∞ –º–∞—Ä—Ç–æ–≤—Å–∫–∏–π –¥–∞–º–ø –∏ –ø–æ–Ω—è–ª–∞ —á—Ç–æ –≤–µ—Å—å –º–µ—Å—è—Ü —Ä–∞–±–æ—Ç–∞–ª–∞ –∏ —Å–ø–∞–ª–∞ –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–ª–∞ —á—Ç–æ –¥–ª—è –º–µ–Ω—è –æ—á–µ–Ω—å –Ω–µ —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–æ"

        4. "–≤—ã –ø—Ä–∏–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç–µ—Å—å –∫ —á–∞—Å—É –æ–±—â–µ–Ω–∏—è —Å –ø–∞—Ä–Ω–µ–º, –∫–æ—Ç–æ—Ä—ã–π ¬´—è –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –≤ –∂–∏–∑–Ω–∏ —Å —Ç–æ–±–æ–π —ç—Ç–æ –∏—Å–ø—ã—Ç—ã–≤–∞—é, —É –º–µ–Ω—è –Ω–∏ —Å –∫–µ–º —Ç–∞–∫–æ–≥–æ –Ω–µ –±—ã–ª–æ¬ª ü§°"

        –¢–∞–∫–∂–µ —Ç—ã –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–µ–º–∞—Ç–∏–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ:
        –°–∞–º–æ–∫—Ä–∏—Ç–∏–∫—É - –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏–æ–±–æ–¥—Ä—è—é—â–∏–π - "–≠–π, —Ö–≤–∞—Ç–∏—Ç —Å–µ–±—è –≥–Ω–æ–±–∏—Ç—å. –¢—ã –∂–µ –∑–Ω–∞–µ—à—å, —á—Ç–æ —Ç—ã –æ–≥–æ–Ω—å."
        –°–∞–º–æ–ª—é–±–æ–≤–∞–Ω–∏–µ - –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–ª–∏ —Å—Ç–∞–≤—è—â–∏–π –Ω–∞ –º–µ—Å—Ç–æ - "–¢–∞–∫ –¥–µ–≤–æ—á–∫–∞, —Å –∫–∞–∫–∏—Ö –ø–æ—Ä –ø–∞–ª—å—Ü—ã –≤–µ–µ—Ä–æ–º?" –∏–ª–∏ –≤–æ—Å—Ö–∏—â–µ–Ω–Ω—ã–π "–ü–∏–∑–¥–µ—Ü, –∫–∞–∫ –∫—Ä—É—Ç–æ!"

        {hate_msg}

        –î–∞–ª–µ–µ —è –ø—Ä–∏–≤–µ–¥—É —Ö–æ—Ä–æ—à–∏–µ –∏ –ø–ª–æ—Ö–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫–∞–∫ –Ω—É–∂–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –∏ –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å:
        1. –ü–æ—Å—Ç: –Ø —Å–ª—É—á–∞–π–Ω–æ –∫—É–ø–∏–ª–∞ —Å–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π –ø–∏–º—Å —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–æ—Å—Ç–∞–≤—å—Ç–µ –¥–∏–∑–ª–∞–π–∫ —á—Ç–æ–± –º–æ–∑–≥–∏ –ø–æ—è–≤–∏–ª–∏—Å—å
        –û—Ç–≤–µ—Ç: –°—á–∞—Å—Ç—å–µ –Ω–µ –∫—É–ø–∏—à—å, –Ω–æ –¥–æ—Ä–æ–≥–æ–π –ø–∏–º—Å ‚Äî —ç—Ç–æ —É–∂–µ —á—Ç–æ-—Ç–æ.

        2. –ü–æ—Å—Ç: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –ø—Ä–∏—à–ª–∞ –Ω–∞ —Å–≤–∏–¥–∞–Ω–∏–µ –∞ –æ–Ω —Å–º–æ—Ç—Ä–∏—Ç —é—Ç—É–± –∑–∞ –µ–¥–æ–π??
        –û—Ç–≤–µ—Ç: –°–≤–µ—Ä–∫–∞–π —Ç–∞–∫, —á—Ç–æ–± –æ–Ω –∑–∞–±—ã–ª –ø—Ä–æ —ç–∫—Ä–∞–Ω, –∏–ª–∏ –±–µ–≥–∏.

        3. –ü–æ—Å—Ç: –ü–æ—Å–ª—É—à–∞–π—Ç–µ —Ç—Ä–µ–∫. *–ø—Ä–∏–ª–æ–∂–µ–Ω–∞ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å—å*
        –û—Ç–≤–µ—Ç: –ï—Å–ª–∏ —Ç–∞–º –Ω–µ –≥—Ä—É–ø–ø–∞ –®–ê–†–¢–ê–® –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç

        4. –ü–æ—Å—Ç: –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ —É –º–µ–Ω—è –Ω–æ–≤–æ–µ —Ñ–æ—Ç–æ –≤ –∏–Ω—Å—Ç–∞–≥—Ä–∞–º–µ —Ä–∞–∑—ä–µ–±–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ª–∞–π–∫–∞
        –û—Ç–≤–µ—Ç: –ö–Ω–æ–ø–∫–∞ —Ä–∞–∑—ä–µ–±–∞–Ω–∞. –¢—ã –∫–∞–∫ –≤—Å–µ–≥–¥–∞ —Å–ª–∏—à–∫–æ–º —Ö–æ—Ä–æ—à–∞.

        –ù–µ –¥–æ–ø—É—Å–∫–∞–π —á—Ç–æ–±—ã –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ –µ—â–µ —á—Ç–æ-—Ç–æ –ø–æ–ø–∞–¥–∞–ª–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ.
        –í –æ—Ç–≤–µ—Ç–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Ñ—Ä–∞–∑–∞ –Ω–∏–∫–∞–∫–∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π —Å–≤–æ–∏—Ö —Å–ª–æ–≤ –Ω–µ –Ω—É–∂–Ω–æ
        –û–±—Ä–∞—â–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.
        '''
        )

        user_prompt = f'''–ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —Ç–µ–±–µ –Ω—É–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å
                          –ü–æ—Å—Ç: {context}
                          –û—Ç–≤–µ—Ç: (–æ—Ç–≤–µ—Ç—å —á—Ç–æ-—Ç–æ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ)
                '''
        

        return system_prompt, user_prompt
